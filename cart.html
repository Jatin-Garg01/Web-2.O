<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>E-Jewel Enclave</title>
        <link rel="stylesheet" href="styles.css">
        <script src="https://kit.fontawesome.com/4c7abfbd72.js" crossorigin="anonymous"></script>
        
    </head>
<body>
    <section style="margin-left: -50px;" id="header">
        <img style="width: 150px;" src="img/logo.png" alt="logo">

        <div>
            <ul id="navbar">
                <li><a  href="index.html">Home</a></li>
                <li><a href="#shop">Categories</a></li>
                <li><a href="about.html">About us</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a class="active" href="cart.html"><i class="fa-solid fa-cart-shopping"></i></a></li>
                <li><a href="login.html"><i class="fa-solid fa-user"></i></a></li>
            </ul>
        </div>
    </section>
    <section id="page-header">
        <div id="header-text">
        <h2>#Glamour On A Budget</h2>
        <p>Enjoy Upto 70% off</p>
    </div>
    </section>

    <section id="cart" class="section-p1">
        <table width="100%">
            <thead>
                <tr>
                    <td>Remove</td>
                    <td>Image</td>
                    <td>Product</td>
                    <td>Price</td>
                    <td>Quantity</td>
                    <td>Subtotal</td>
                </tr>
            </thead>
            <tbody id="cartItems">
                <tr>
                    <td><a href=""><i class="far fa-times-circle"></i></a></td>
                    <td><img src="img/Best/American diamond chokker.jpg" alt=""></td>
                    <td>American Diamond Set</td>
                    <td>Rs.550</td>
                    <td><input type="number" value="1"></td>
                    <td>Rs.550</td>
                    
                </tr>
            </tbody>
        </table>
    </section>

    <section id="cart-add" class="section-p1">
        <div id="coupon">
            <h3>Apply Coupon</h3>
            <input type="text" placeholder="Enter Your Coupon">
            <button class="normal"><strong>Apply</strong></button>
        </div>

        <div id="subtotal">
            <h3>Cart Total</h3>
            <table>
                <tr>
                    <td>Cart Subtotal</td>
                    <td id="cartSubtotal">Rs. 0</td> <!-- Subtotal will be injected here -->
                </tr>
                <tr>
                    <td>Shipping</td>
                    <td>Free</td>
                </tr>
                <tr>
                    <td><strong>Total</strong></td>
                    <td id="cartTotal"><strong>Rs.0</strong></td> <!-- Total will be injected here -->
                </tr>
            </table>
            <button id="checkoutBtn" onclick="proceedToCheckout();" class="normal">
                <strong>Proceed to Checkout</strong>
            </button>
        </div>
        
        
    </section>

    <footer class="section-p1">
        <div class="col1">
            <img style="height: 125px;width: 175px;" src="img/logo.png" alt="">
            <h6>At Varun's Creations, we are passionate about making stylish and elegant jewellery accessible to everyone.
                Our mission is to provide exquisite pieces that enhance your look, all while ensuring affordability.
            </h6>
        </div>
        <div class="col">

            <h4>Get to know us</h4>
            <p><a href="#">About Us</a></p>
            <p><a href="#">Visit Us</a></p>
            <p><a href="#">Contact Us</a></p>
        </div>

        <div class="col">
            <h4>Support for You</h4>
            <p><a href="#">Shipping & Delivery</a></p>
            <p><a href="#">Refund & Exchange</a></p>
            <p><a href="#">Privacy Policy</a></p>
            <p><a href="#">Terms & Conditions</a></p>

        </div>

        <div class="contact">
            <h4>Contact Us</h4>
            <p><a href="">Gmail</a></p>
            <p><a href="#">+91 6284227796</a></p>
        </div>

    </footer>
    <div class="follow">
        <h4>Follow us</h4>
        <div class="icon">
            <a href=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                    <path
                        d="M194.4 211.7a53.3 53.3 0 1 0 59.3 88.7 53.3 53.3 0 1 0 -59.3-88.7zm142.3-68.4c-5.2-5.2-11.5-9.3-18.4-12c-18.1-7.1-57.6-6.8-83.1-6.5c-4.1 0-7.9 .1-11.2 .1c-3.3 0-7.2 0-11.4-.1c-25.5-.3-64.8-.7-82.9 6.5c-6.9 2.7-13.1 6.8-18.4 12s-9.3 11.5-12 18.4c-7.1 18.1-6.7 57.7-6.5 83.2c0 4.1 .1 7.9 .1 11.1s0 7-.1 11.1c-.2 25.5-.6 65.1 6.5 83.2c2.7 6.9 6.8 13.1 12 18.4s11.5 9.3 18.4 12c18.1 7.1 57.6 6.8 83.1 6.5c4.1 0 7.9-.1 11.2-.1c3.3 0 7.2 0 11.4 .1c25.5 .3 64.8 .7 82.9-6.5c6.9-2.7 13.1-6.8 18.4-12s9.3-11.5 12-18.4c7.2-18 6.8-57.4 6.5-83c0-4.2-.1-8.1-.1-11.4s0-7.1 .1-11.4c.3-25.5 .7-64.9-6.5-83l0 0c-2.7-6.9-6.8-13.1-12-18.4zm-67.1 44.5A82 82 0 1 1 178.4 324.2a82 82 0 1 1 91.1-136.4zm29.2-1.3c-3.1-2.1-5.6-5.1-7.1-8.6s-1.8-7.3-1.1-11.1s2.6-7.1 5.2-9.8s6.1-4.5 9.8-5.2s7.6-.4 11.1 1.1s6.5 3.9 8.6 7s3.2 6.8 3.2 10.6c0 2.5-.5 5-1.4 7.3s-2.4 4.4-4.1 6.2s-3.9 3.2-6.2 4.2s-4.8 1.5-7.3 1.5l0 0c-3.8 0-7.5-1.1-10.6-3.2zM448 96c0-35.3-28.7-64-64-64H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96zM357 389c-18.7 18.7-41.4 24.6-67 25.9c-26.4 1.5-105.6 1.5-132 0c-25.6-1.3-48.3-7.2-67-25.9s-24.6-41.4-25.8-67c-1.5-26.4-1.5-105.6 0-132c1.3-25.6 7.1-48.3 25.8-67s41.5-24.6 67-25.8c26.4-1.5 105.6-1.5 132 0c25.6 1.3 48.3 7.1 67 25.8s24.6 41.4 25.8 67c1.5 26.3 1.5 105.4 0 131.9c-1.3 25.6-7.1 48.3-25.8 67z" />
                </svg></a>

            <a href=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                    <path
                        d="M92.1 254.6c0 24.9 7 49.2 20.2 70.1l3.1 5-13.3 48.6L152 365.2l4.8 2.9c20.2 12 43.4 18.4 67.1 18.4h.1c72.6 0 133.3-59.1 133.3-131.8c0-35.2-15.2-68.3-40.1-93.2c-25-25-58-38.7-93.2-38.7c-72.7 0-131.8 59.1-131.9 131.8zM274.8 330c-12.6 1.9-22.4 .9-47.5-9.9c-36.8-15.9-61.8-51.5-66.9-58.7c-.4-.6-.7-.9-.8-1.1c-2-2.6-16.2-21.5-16.2-41c0-18.4 9-27.9 13.2-32.3c.3-.3 .5-.5 .7-.8c3.6-4 7.9-5 10.6-5c2.6 0 5.3 0 7.6 .1c.3 0 .5 0 .8 0c2.3 0 5.2 0 8.1 6.8c1.2 2.9 3 7.3 4.9 11.8c3.3 8 6.7 16.3 7.3 17.6c1 2 1.7 4.3 .3 6.9c-3.4 6.8-6.9 10.4-9.3 13c-3.1 3.2-4.5 4.7-2.3 8.6c15.3 26.3 30.6 35.4 53.9 47.1c4 2 6.3 1.7 8.6-1c2.3-2.6 9.9-11.6 12.5-15.5c2.6-4 5.3-3.3 8.9-2s23.1 10.9 27.1 12.9c.8 .4 1.5 .7 2.1 1c2.8 1.4 4.7 2.3 5.5 3.6c.9 1.9 .9 9.9-2.4 19.1c-3.3 9.3-19.1 17.7-26.7 18.8zM448 96c0-35.3-28.7-64-64-64H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96zM148.1 393.9L64 416l22.5-82.2c-13.9-24-21.2-51.3-21.2-79.3C65.4 167.1 136.5 96 223.9 96c42.4 0 82.2 16.5 112.2 46.5c29.9 30 47.9 69.8 47.9 112.2c0 87.4-72.7 158.5-160.1 158.5c-26.6 0-52.7-6.7-75.8-19.3z" />
                </svg></a>

            <a href=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                    <path
                        d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64h98.2V334.2H109.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H255V480H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z" />
                </svg></a>
        </div>
    </div>
</body>
<script>
    // Function to load cart items from localStorage and display them
    function loadCart() {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        const cartItems = document.getElementById("cartItems");
        cartItems.innerHTML = '';
        let subtotal = 0;

        cart.forEach((item, index) => {
            const total = item.price * item.quantity;
            subtotal += total;

            const row = `
                <tr>
                    <td><a href="#" onclick="removeItem(${index})"><i class="far fa-times-circle"></i></a></td>
                    <td><img src="${item.img}" alt="${item.title}" width="100"></td>
                    <td>${item.title}</td>
                    <td>Rs.${item.price.toFixed(2)}</td>
                    <td>
                        <input type="number" value="${item.quantity}" min="1" onchange="updateQuantity(${index}, this.value)">
                    </td>
                    <td>Rs.${total.toFixed(2)}</td>
                </tr>
            `;
            cartItems.innerHTML += row;
        });

        document.getElementById("cartSubtotal").innerText = `Rs. ${subtotal.toFixed(2)}`;
        document.getElementById("cartTotal").innerHTML = `<strong>Rs.${subtotal.toFixed(2)}</strong>`;
        
        updateCheckoutButton(); // Update the checkout button based on user login status
    }

    // Function to remove an item from the cart
    function removeItem(index) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cart)); 
        loadCart(); 
    }

    // Function to update the quantity of a cart item
    function updateQuantity(index, newQuantity) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        newQuantity = parseInt(newQuantity, 10);
        if (newQuantity > 0) {
            cart[index].quantity = newQuantity; 
        } else {
            cart.splice(index, 1); 
        }
        localStorage.setItem("cart", JSON.stringify(cart)); 
        loadCart(); 
    }

    // Function to update the checkout button based on user login status
    function updateCheckoutButton() {
        const checkoutBtn = document.getElementById("checkoutBtn");
        const user = JSON.parse(localStorage.getItem("user")); // Assuming user is stored as a JSON string

        if (user) {
            // User is logged in
            checkoutBtn.innerHTML = "<strong>Proceed to Checkout</strong>";
            checkoutBtn.onclick = function() {
                window.location.href = 'p1.html'; // Proceed to checkout
            };
        } else {
            // User is not logged in
            checkoutBtn.innerHTML = "<strong>Login first to Checkout</strong>";
            checkoutBtn.onclick = function() {
                window.location.href = 'login.html'; // Redirect to login page
            };
        }
    }

    // Initial load
    window.onload = loadCart;
</script>

</html>